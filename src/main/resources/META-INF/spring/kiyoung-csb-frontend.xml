<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:camel="http://camel.apache.org/schema/spring"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                           http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring-2.11.4.xsd">



    <routeContext id="FRONTEND_ROUTE" xmlns="http://camel.apache.org/schema/spring">

        <!-- header를 검증하는 서비스  -->
        <route id="FrontEnd요청처리">
            <from uri="direct:front-requestProcess"/>
            <process ref="headerValueValidateProcessor"/>
            <unmarshal ref="gson"/>   <!-- Json 데이터를 객체로 -->
        </route>

        <!-- Service class 호출 후 수행 되는 Front 영역의 서비스  -->
        <!--<route id="FrontEnd응답처리">-->
            <!--<from uri="direct:post-frontservice"/>-->
            <!--<marshal ref="gson"/>  &lt;!&ndash;객체 데이터를 JSON으로&ndash;&gt;-->
        <!--</route>-->


    </routeContext>

    <!-- 헤더 필수값을 체크하기 위한 프로세서 -->
    <bean id="headerValueValidateProcessor" class="com.kiyoung.cloud.extension.accesscontrol.HeaderValueValidateProcessor">

        <!-- testMode를 property 로 빼 -->
        <property name="testMode" value="false"/>
        <!--서비스와 메소드를 필수 헤더값으로 지정-->
        <property name="headerKeyList">
            <list>
                <value>service</value>
                <value>method</value>
            </list>
        </property>
    </bean>


</beans>